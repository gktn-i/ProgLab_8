Index: Backend/total_customers.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>document.addEventListener('DOMContentLoaded', function() {\n    fetch('customer_segments.php')\n        .then(response => response.json())\n        .then(data => {\n            createChart(data);\n        })\n        .catch(error => console.error('Error fetching data:', error));\n});\n\nfunction createChart(data) {\n    const ctx = document.getElementById('customerChart').getContext('2d');\n\n    const labels = Object.keys(data);\n    const values = Object.values(data).map(segment => segment.length);\n\n    const chart = new Chart(ctx, {\n        type: 'bar',\n        data: {\n            labels: labels,\n            datasets: [{\n                label: 'Customer Segments',\n                data: values,\n                backgroundColor: [\n                    'rgba(255, 99, 132, 0.2)',\n                    'rgba(54, 162, 235, 0.2)',\n                    'rgba(255, 206, 86, 0.2)'\n                ],\n                borderColor: [\n                    'rgba(255, 99, 132, 1)',\n                    'rgba(54, 162, 235, 1)',\n                    'rgba(255, 206, 86, 1)'\n                ],\n                borderWidth: 1\n            }]\n        },\n        options: {\n            scales: {\n                y: {\n                    beginAtZero: true\n                }\n            }\n        }\n    });\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Backend/total_customers.js b/Backend/total_customers.js
--- a/Backend/total_customers.js	(revision 986225c977829ead01a820f5127dd75691f966b3)
+++ b/Backend/total_customers.js	(date 1718200375852)
@@ -1,3 +1,5 @@
+
+
 document.addEventListener('DOMContentLoaded', function() {
     fetch('customer_segments.php')
         .then(response => response.json())
Index: Backend/customer_segments.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\ninclude 'database.php';\n$mysqli = getConnection();\n\n// Umsatz pro Kunde berechnen\n$query = \"SELECT customers.customerID, SUM(orders.total) AS total_spent\n          FROM customers\n          LEFT JOIN orders ON customers.customerID = orders.customerID\n          GROUP BY customers.customerID\";\n$result = $mysqli->query($query);\n\nif (!$result) {\n    die(\"Error in query: $query. \" . $mysqli->error);\n}\n\n// Kunden in Segmente einteilen\n$segment_A = [];\n$segment_B = [];\n$segment_C = [];\n\n$total_spent = 0;\nwhile ($row = $result->fetch_assoc()) {\n    $total_spent += $row['total_spent'];\n}\n\n$target_A = 0.6 * $total_spent;\n$target_B = 0.25 * $total_spent;\n\n$result->data_seek(0); // Zurücksetzen des Resultatsatzes, um erneut durchzugehen\nwhile ($row = $result->fetch_assoc()) {\n    if ($row['total_spent'] >= $target_A) {\n        $segment_A[] = $row;\n    } elseif ($row['total_spent'] >= $target_B) {\n        $segment_B[] = $row;\n    } else {\n        $segment_C[] = $row;\n    }\n}\n\n// Daten für die Visualisierung zurückgeben\n$data = [\n    'A' => $segment_A,\n    'B' => $segment_B,\n    'C' => $segment_C\n];\n\n// Ausgabe der Kundensegmentdaten im JSON-Format\nheader('Content-Type: application/json');\necho json_encode($data);\n\n$mysqli->close();\n?>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Backend/customer_segments.php b/Backend/customer_segments.php
--- a/Backend/customer_segments.php	(revision 986225c977829ead01a820f5127dd75691f966b3)
+++ b/Backend/customer_segments.php	(date 1718202286481)
@@ -1,6 +1,6 @@
 <?php
 include 'database.php';
-$mysqli = getConnection();
+$mysqli = require _DIR_ . "/database.php";
 
 // Umsatz pro Kunde berechnen
 $query = "SELECT customers.customerID, SUM(orders.total) AS total_spent
Index: total_customers.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\n<html>\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n    <title>Customer Analysis</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n    <script src=\"Backend/total_customer.js\"></script>\n\n\n    <script src=\"scripts.js\" defer></script>\n\n    <style>\n\n        .container {\n            display: flex;\n            flex-wrap: wrap;\n            max-width: 1300px;\n            margin: 50px auto;\n            justify-content: space-between;\n        }\n\n        .chart-container {\n            width: 600px;\n            height: 400px;\n            text-align: center;\n            margin-bottom: 20px;\n            font-size: 20px;\n        }\n\n        .dropdown-container {\n            text-align: center;\n            margin-bottom: 20px;\n        }\n\n        body {\n            font-family: Arial, sans-serif;\n            margin: 0;\n            padding: 0;\n            background-color: #f5f5f5;\n        }\n\n        .section {\n            flex: calc(50% - 20px);\n            box-sizing: border-box;\n            padding: 10px;\n            border: 1px solid #666;\n            border-radius: 8px;\n            background-color: #fff;\n            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);\n            margin: 10px;\n            margin-bottom: 20px;\n        }\n\n        .section h2 {\n            font-size: 20px;\n            margin-bottom: 20px;\n        }\n\n        .section p {\n            font-size: 14px;\n            line-height: 1.6;\n        }\n\n        .store-details-section {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n        }\n\n        #storeDetailChart {\n            max-width: 600px;\n            max-height: 400px;\n        }\n\n\n\n        .chart-container1 {\n            width: 65%;\n            margin-bottom: 20px;\n            text-align: center;\n            font-size: 20px;\n\n        }\n\n        .chart-center {\n            margin: 0 auto;\n\n        }\n\n    </style>\n</head>\n\n<body>\n    <?php include 'Navbar.php'; ?>\n\n    <div class=\"container\">\n        <div class=\"section\">\n            <div class=\"chart-container1 chart-center\">\n                <div class=\"title\">Customer Segments</div>\n                <canvas id=\"BarChart\"></canvas>\n            </div>\n        </div>\n\n        <div class=\"section\">\n            <div class=\"chart-container\">\n                <div class=\"title\">Customer Percentage</div>\n                <canvas id=\"Piechart\"></canvas>\n            </div>\n        </div>\n\n</body>\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/total_customers.php b/total_customers.php
--- a/total_customers.php	(revision 986225c977829ead01a820f5127dd75691f966b3)
+++ b/total_customers.php	(date 1718202043483)
@@ -1,3 +1,4 @@
+
 <!DOCTYPE html>
 <html>
 
